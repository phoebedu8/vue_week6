import{_ as h,c,a as t,F as _,e as p,f as m,t as a,o as d,g,v,d as f}from"./index.b5da4372.js";const{VITE_APP_URL:i,VITE_APP_PATH:r}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"yiijiee118",BASE_URL:"/vue_week6/",MODE:"production",DEV:!1,PROD:!0},y={data(){return{carts:[],cartData:{product_id:"",qty:1}}},methods:{getCart(){this.$http.get(`${i}/api/${r}/cart`).then(e=>{this.carts=e.data.data}).catch(e=>{console.log(e)})},updateCart(e){console.log(e),this.cartData.product_id=e.id,this.cartData.qty=e.qty,this.$http.put(`${i}/api/${r}/cart/${e.id}`,{data:this.cartData}).then(s=>{this.getCart(),alert(s.data.message)}).catch(s=>{console.log(s)})},removeCartItem(e){this.$http.delete(`${i}/api/${r}/cart/${e}`).then(s=>{this.getCart(),alert(s.data.message)}).catch(s=>{console.log(s)})}},mounted(){this.getCart()}},b=t("h5",{class:"my-4"},"\u8CFC\u7269\u8ECA\u9801\u9762",-1),x={class:"container"},C={class:"mt-4"},$={class:"table align-middle"},P=t("thead",null,[t("tr",null,[t("th"),t("th",null,"\u54C1\u540D"),t("th",{style:{width:"150px"}},"\u6578\u91CF/\u55AE\u4F4D"),t("th",null,"\u55AE\u50F9")])],-1),V=["onClick"],D=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),E=f(" x "),T=[D,E],k={class:"input-group input-group-sm"},A={class:"input-group mb-3"},B=["onUpdate:modelValue","onBlur"],I={class:"input-group-text",id:"basic-addon2"},q={class:"text-end"},U=t("td",{colspan:"3",class:"text-end"},"\u7E3D\u8A08",-1),w={class:"text-end"};function L(e,s,R,N,n,u){return d(),c(_,null,[b,t("div",x,[t("div",C,[t("table",$,[P,t("tbody",null,[n.carts?(d(!0),c(_,{key:0},p(n.carts.carts,o=>(d(),c("tr",{key:o.id},[t("td",null,[t("button",{onClick:l=>u.removeCartItem(o.id),type:"button",class:"btn btn-outline-danger btn-sm"},T,8,V)]),t("td",null,a(o.product.title),1),t("td",null,[t("div",k,[t("div",A,[g(t("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":l=>o.qty=l,onBlur:l=>u.updateCart(o)},null,40,B),[[v,o.qty,void 0,{number:!0}]]),t("span",I,a(o.product.unit),1)])])]),t("td",q,a(o.final_total),1)]))),128)):m("",!0)]),t("tfoot",null,[t("tr",null,[U,t("td",w,a(n.carts.total),1)])])])])])],64)}const H=h(y,[["render",L]]);export{H as default};
